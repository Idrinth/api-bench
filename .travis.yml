git:
  depth: 3  
cache:
  directories:
  - ~/.composer/cache/
  - ~/.npm
  - ~/.codacy-coverage

jobs:
  include:
  - language: node_js
    node_js: node
    stage: Test
    name: liniting
    install:
    - npm install
    - export PATH=/home/travis/build/Idrinth/api-bench/node_modules/.bin:$PATH
    script:
    - npm run-script lint
  - language: node_js
    node_js: node
    stage: Test
    name: unittest
    install:
    - npm install
    - npm install coveralls --save-dev
    - export PATH=/home/travis/build/Idrinth/api-bench/node_modules/.bin:$PATH
    script:
    - npm test
    after_success:
    - bash <(wget -q -O - https://coverage.codacy.com/get.sh) report -r coverage/lcov.info
    - nyc report --reporter=text-lcov | coveralls 
